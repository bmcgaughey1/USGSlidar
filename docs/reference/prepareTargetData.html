<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>USGS Lidar Toolkit -- Prepare Target Data — prepareTargetData • USGSlidar</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="USGS Lidar Toolkit -- Prepare Target Data — prepareTargetData" />
<meta property="og:description" content="Prepare features for use when querying a lidar project or tile index to determine
available data coverage. The basic operation done by this function is to apply the
buffer to the features." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">USGSlidar</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/my-vignette.html">USGSlidar -- Basics</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>USGS Lidar Toolkit -- Prepare Target Data</h1>
    
    <div class="hidden name"><code>prepareTargetData.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Prepare features for use when querying a lidar project or tile index to determine
available data coverage. The basic operation done by this function is to apply the
<code>buffer</code> to the features.</p>
    </div>

    <pre class="usage"><span class='fu'>prepareTargetData</span><span class='op'>(</span>
  <span class='va'>x</span>,
  <span class='va'>y</span>,
  buffer <span class='op'>=</span> <span class='fl'>0</span>,
  shape <span class='op'>=</span> <span class='st'>"square"</span>,
  aoi <span class='op'>=</span> <span class='st'>""</span>,
  crs <span class='op'>=</span> <span class='st'>""</span>,
  segments <span class='op'>=</span> <span class='fl'>60</span>,
  returnType <span class='op'>=</span> <span class='st'>"Spatial"</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>Location or list of locations containing the easting for the center of
the area-of-interest.</p></td>
    </tr>
    <tr>
      <th>y</th>
      <td><p>Location or list of locations containing the northing for the center of
the area-of-interest.</p></td>
    </tr>
    <tr>
      <th>buffer</th>
      <td><p>Distance or list of distances added or subtracted to <code>(x,y)</code>
to create the area-of-interest. Can be 0 when used with <code>(x,y)</code> to
return projects providing coverage for point location(s). Can be a
vector of values corresponding to the number of objects in <code>aoi</code>
allowing a different buffer size for each object when <code>aoi</code> is a
<code>Spatial*</code> of <code>sf</code> object. <code>buffer</code> can be negative with
polygon feature to reduce the area considered. However, you may end up
with weird shapes if the distance is larger than the width of the polygon.</p></td>
    </tr>
    <tr>
      <th>shape</th>
      <td><p>Character string describing the shape of the sample area.
Valid values are <code>"square"</code> or <code>"circle"</code>. The buffer shape
is the same for all objects specified by <code>(x,y)</code> or <code>aoi</code>.</p></td>
    </tr>
    <tr>
      <th>aoi</th>
      <td><p><code>Spatial*</code> or <code>sf</code> object containing a point(s) or polygon(s)
describing the area(s) of interest. Can be points or polygons.</p></td>
    </tr>
    <tr>
      <th>crs</th>
      <td><p>Valid <code>proj4string</code> string defining the coordinate
reference system of <code>(x,y)</code> or <code>aoi</code>. <code>crs</code> is required when using
<code>(x,y)</code>. It is optional when using <code>aoi</code>. This can also be a valid
<code>SRS_string</code> for use with the sp::CRS() function where it will be provided
as the <code>projargs</code> argument.</p></td>
    </tr>
    <tr>
      <th>segments</th>
      <td><p>Number of segments to use when generating a circular
area of interest. When using a <code>SpatialPoint*</code> or <code>sf</code> object
with <code>shape = "circle"</code>, set <code>segments</code> to a rather large value (60
or higher) that is a multiple of 4. The <code>gBuffer</code> function from
<code>rgeos</code> and <code>st_buffer</code> function from <code>sf</code> are used to
build the sample areas and it accepts the number of segments in a quarter
circle so small values for <code>segments</code> may not produce good circles.
Values for <code>segments</code> that are not a multiple of 4 will not
produce circles with the correct number of segments.</p></td>
    </tr>
    <tr>
      <th>returnType</th>
      <td><p>Character string specifying the object type for the
polygon object returned by <code>prepareTargetData</code> when <code>(x,y)</code> is
used to specify the area-of-interest. Valid values are <code>"Spatial"</code>
or <code>"sf"</code>. <code>returnType</code> is ignored when <code>aoi</code> is specified
and the return type with match the type of <code>aoi</code>.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A set of optionally buffered spatial features. The return type will
  be the same as the <code>aoi</code> type. When <code>(x,y)</code> is used,
  <code>returnType</code> specifies the object type returned by <code>prepareTargetData</code>.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Prepare point or polygon data for use when querying to determine the lidar
  project or tile coverage. Typically this preparation is done by the queryUSGSProjectIndex
  or queryUSGSTileIndex functions but you can use prepareTargetData to build the
  query objects so they can be used for other purposes.</p>
<p>Units for <code>buffer</code> are the same as the horizontal units for the input features
  so you shouldn't use data in LON-LAT with units of degrees.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'>prepareTargetData</span><span class='op'>(</span><span class='op'>-</span><span class='fl'>13540901</span>, <span class='fl'>5806426</span>, <span class='fl'>180</span>, shape <span class='op'>=</span> <span class='st'>"circle"</span>,
  crs <span class='op'>=</span> <span class='fu'>sp</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/sp/man/CRS-class.html'>CRS</a></span><span class='op'>(</span>SRS_string<span class='op'>=</span><span class='st'>"EPSG:3857"</span><span class='op'>)</span><span class='op'>@</span><span class='va'>projargs</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='warning'>Warning: Discarded ellps WGS 84 in Proj4 definition: +proj=merc +a=6378137 +b=6378137 +lat_ts=0 +lon_0=0 +x_0=0 +y_0=0 +k=1 +units=m +nadgrids=@null +wktext +no_defs +type=crs</span></div><div class='output co'>#&gt; <span class='warning'>Warning: Discarded datum World Geodetic System 1984 in Proj4 definition</span></div><div class='output co'>#&gt; <span class='warning'>Warning: Discarded ellps WGS 84 in Proj4 definition: +proj=merc +a=6378137 +b=6378137 +lat_ts=0 +lon_0=0 +x_0=0 +y_0=0 +k=1 +units=m +nadgrids=@null +wktext +no_defs +type=crs</span></div><div class='output co'>#&gt; <span class='warning'>Warning: Discarded datum World Geodetic System 1984 in Proj4 definition</span></div><div class='output co'>#&gt; An object of class "SpatialPolygonsDataFrame"
#&gt; Slot "data":
#&gt;   ID
#&gt; 1 P1
#&gt; 
#&gt; Slot "polygons":
#&gt; [[1]]
#&gt; An object of class "Polygons"
#&gt; Slot "Polygons":
#&gt; [[1]]
#&gt; An object of class "Polygon"
#&gt; Slot "labpt":
#&gt; [1] -13540901   5806426
#&gt; 
#&gt; Slot "area":
#&gt; [1] 101601.7
#&gt; 
#&gt; Slot "hole":
#&gt; [1] FALSE
#&gt; 
#&gt; Slot "ringDir":
#&gt; [1] 1
#&gt; 
#&gt; Slot "coords":
#&gt;               x       y
#&gt;  [1,] -13540721 5806426
#&gt;  [2,] -13540722 5806407
#&gt;  [3,] -13540725 5806389
#&gt;  [4,] -13540730 5806370
#&gt;  [5,] -13540737 5806353
#&gt;  [6,] -13540745 5806336
#&gt;  [7,] -13540755 5806320
#&gt;  [8,] -13540767 5806306
#&gt;  [9,] -13540781 5806292
#&gt; [10,] -13540795 5806280
#&gt; [11,] -13540811 5806270
#&gt; [12,] -13540828 5806262
#&gt; [13,] -13540845 5806255
#&gt; [14,] -13540864 5806250
#&gt; [15,] -13540882 5806247
#&gt; [16,] -13540901 5806246
#&gt; [17,] -13540920 5806247
#&gt; [18,] -13540938 5806250
#&gt; [19,] -13540957 5806255
#&gt; [20,] -13540974 5806262
#&gt; [21,] -13540991 5806270
#&gt; [22,] -13541007 5806280
#&gt; [23,] -13541021 5806292
#&gt; [24,] -13541035 5806306
#&gt; [25,] -13541047 5806320
#&gt; [26,] -13541057 5806336
#&gt; [27,] -13541065 5806353
#&gt; [28,] -13541072 5806370
#&gt; [29,] -13541077 5806389
#&gt; [30,] -13541080 5806407
#&gt; [31,] -13541081 5806426
#&gt; [32,] -13541080 5806445
#&gt; [33,] -13541077 5806463
#&gt; [34,] -13541072 5806482
#&gt; [35,] -13541065 5806499
#&gt; [36,] -13541057 5806516
#&gt; [37,] -13541047 5806532
#&gt; [38,] -13541035 5806546
#&gt; [39,] -13541021 5806560
#&gt; [40,] -13541007 5806572
#&gt; [41,] -13540991 5806582
#&gt; [42,] -13540974 5806590
#&gt; [43,] -13540957 5806597
#&gt; [44,] -13540938 5806602
#&gt; [45,] -13540920 5806605
#&gt; [46,] -13540901 5806606
#&gt; [47,] -13540882 5806605
#&gt; [48,] -13540864 5806602
#&gt; [49,] -13540845 5806597
#&gt; [50,] -13540828 5806590
#&gt; [51,] -13540811 5806582
#&gt; [52,] -13540795 5806572
#&gt; [53,] -13540781 5806560
#&gt; [54,] -13540767 5806546
#&gt; [55,] -13540755 5806532
#&gt; [56,] -13540745 5806516
#&gt; [57,] -13540737 5806499
#&gt; [58,] -13540730 5806482
#&gt; [59,] -13540725 5806463
#&gt; [60,] -13540722 5806445
#&gt; [61,] -13540721 5806426
#&gt; 
#&gt; 
#&gt; 
#&gt; Slot "plotOrder":
#&gt; [1] 1
#&gt; 
#&gt; Slot "labpt":
#&gt; [1] -13540901   5806426
#&gt; 
#&gt; Slot "ID":
#&gt; [1] "1"
#&gt; 
#&gt; Slot "area":
#&gt; [1] 101601.7
#&gt; 
#&gt; 
#&gt; 
#&gt; Slot "plotOrder":
#&gt; [1] 1
#&gt; 
#&gt; Slot "bbox":
#&gt;         min       max
#&gt; x -13541081 -13540721
#&gt; y   5806246   5806606
#&gt; 
#&gt; Slot "proj4string":
#&gt; CRS arguments:
#&gt;  +proj=merc +a=6378137 +b=6378137 +lat_ts=0 +lon_0=0 +x_0=0 +y_0=0 +k=1
#&gt; +units=m +nadgrids=@null +wktext +no_defs 
#&gt; </div><div class='input'><span class='va'>pt1</span> <span class='op'>&lt;-</span> <span class='fu'>sf</span><span class='fu'>::</span><span class='fu'><a href='https://r-spatial.github.io/sf/reference/st.html'>st_point</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='op'>-</span><span class='fl'>13540901</span>, <span class='fl'>5806426</span> <span class='op'>+</span> <span class='fl'>500</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>pt2</span> <span class='op'>&lt;-</span> <span class='fu'>sf</span><span class='fu'>::</span><span class='fu'><a href='https://r-spatial.github.io/sf/reference/st.html'>st_point</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='op'>-</span><span class='fl'>13540901</span> <span class='op'>+</span> <span class='fl'>500</span>, <span class='fl'>5806426</span> <span class='op'>-</span> <span class='fl'>500</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>pt3</span> <span class='op'>&lt;-</span> <span class='fu'>sf</span><span class='fu'>::</span><span class='fu'><a href='https://r-spatial.github.io/sf/reference/st.html'>st_point</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='op'>-</span><span class='fl'>13540901</span> <span class='op'>-</span> <span class='fl'>500</span>, <span class='fl'>5806426</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>pt4</span> <span class='op'>&lt;-</span> <span class='fu'>sf</span><span class='fu'>::</span><span class='fu'><a href='https://r-spatial.github.io/sf/reference/st.html'>st_point</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='op'>-</span><span class='fl'>13540901</span> <span class='op'>+</span> <span class='fl'>1000</span>, <span class='fl'>5806426</span> <span class='op'>-</span> <span class='fl'>1000</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>id</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"P1"</span>, <span class='st'>"P2"</span>, <span class='st'>"P3"</span>, <span class='st'>"P4"</span><span class='op'>)</span>
<span class='va'>x_sf</span> <span class='op'>&lt;-</span> <span class='fu'>sf</span><span class='fu'>::</span><span class='fu'><a href='https://r-spatial.github.io/sf/reference/sf.html'>st_sf</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span><span class='op'>(</span>ID <span class='op'>=</span> <span class='va'>id</span>, stringsAsFactors <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>,
  geom <span class='op'>=</span> <span class='fu'>sf</span><span class='fu'>::</span><span class='fu'><a href='https://r-spatial.github.io/sf/reference/sfc.html'>st_sfc</a></span><span class='op'>(</span><span class='va'>pt1</span>, <span class='va'>pt2</span>, <span class='va'>pt3</span>, <span class='va'>pt4</span><span class='op'>)</span>,
  crs <span class='op'>=</span> <span class='fu'>sp</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/sp/man/CRS-class.html'>CRS</a></span><span class='op'>(</span>SRS_string<span class='op'>=</span><span class='st'>"EPSG:3857"</span><span class='op'>)</span><span class='op'>@</span><span class='va'>projargs</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='warning'>Warning: Discarded ellps WGS 84 in Proj4 definition: +proj=merc +a=6378137 +b=6378137 +lat_ts=0 +lon_0=0 +x_0=0 +y_0=0 +k=1 +units=m +nadgrids=@null +wktext +no_defs +type=crs</span></div><div class='output co'>#&gt; <span class='warning'>Warning: Discarded datum World Geodetic System 1984 in Proj4 definition</span></div><div class='input'><span class='va'>samples</span> <span class='op'>&lt;-</span> <span class='fu'>prepareTargetData</span><span class='op'>(</span>aoi <span class='op'>=</span> <span class='va'>x_sf</span>, buffer <span class='op'>=</span> <span class='fl'>180</span><span class='op'>)</span>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Robert McGaughey.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


